---
trigger: glob
description:
globs: src/**/*.test.ts src/**/*.test.tsx src/**/*.spec.ts src/**/*.spec.tsx tests/**/*.ts tests/**/*.tsx
---

# Правила для тестов

## Общие требования

- Всегда отвечай **на русском языке**.
- Тесты должны быть понятными, предсказуемыми и повторяемыми.
- Имена тестов отражают поведение, а не реализацию.
- Один тест — одна логическая проверка. Если сценариев много — разделяй на разные кейсы.

## Unit-тесты

- Используй Vitest или Jest (в зависимости от проекта).
- Тестируй публичное поведение функции или компонента, а не внутренние детали.
- Избегай избыточного мокинга: тест должен ловить реальные регрессии.
- Если компонент сложный — проверяй пользовательское поведение, а не private-логику.

## UI-тесты

- Используй React Testing Library, @vue/test-utils или другой установленный инструмент.
- Тестируй интерфейс так, как его использует пользователь:
    - клики
    - ввод текста
    - изменения состояния
    - ожидаемый вывод
- Не проверяй private state напрямую — только публичные эффекты.

## e2e

- Если проект использует Cypress/Playwright — расширяй существующую структуру.
- Не дублируй сценарии, которые уже покрыты unit/UI.

## Архитектура и структура

- Располагай тест рядом с тестируемым файлом (если проект следует этому принципу) либо в /tests.
- Следуй принятой структуре: mock → render → act → assert.
- Если логика повторяется — создавай хелперы/фабрики вместо копипаста.

## Дополнительные правила

- Не оставляй временные snapshot’ы и ненужные моки.
- Тяжёлые или медленные тесты оптимизируй (fakeTimers, mock network).
- Если тест упал — причина должна быть понятной, без загадочных ошибок.

---

## Итог

Тесты должны быть простыми, читаемыми и отражать поведение приложения. Они помогают ловить ошибки, а не мешают работе разработчика.
